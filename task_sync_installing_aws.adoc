---
sidebar: sidebar 
permalink: task_sync_installing_aws.html 
keywords: data broker, install, aws, networking, permissions, regions, install data broker in aws, install in aws, deploy in aws, deploy data broker in aws, cft, template, iam role, use your own iam role, regions, supported regions, networking requirements, port, ports, 443, port 443, ntp, network time protocol, permissions, iam role, iam permissions, aws data broker 
summary: 同期関係を作成する場合は、 AWS データブローカーオプションを選択して、 VPC 内の新しい EC2 インスタンスにデータブローカーソフトウェアを展開します。Cloud Sync ではインストールプロセスがガイドされますが、インストールの準備に役立つように、このページの要件と手順が繰り返されています。 
---
= AWS にデータブローカーをインストールする
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
同期関係を作成する場合は、 AWS データブローカーオプションを選択して、 VPC 内の新しい EC2 インスタンスにデータブローカーソフトウェアを展開します。Cloud Sync ではインストールプロセスがガイドされますが、インストールの準備に役立つように、このページの要件と手順が繰り返されています。

また、クラウド内または社内の既存の Linux ホストにデータブローカーをインストールすることもできます。 link:task_sync_installing_linux.html["詳細はこちら。"]。



== サポートされている AWS リージョン

中国と GovCloud （米国）以外のすべての地域がサポートされています。



== ネットワーク要件

* データブローカーは、アウトバウンドインターネット接続を必要としているため、クラウド同期サービスにポート 443 経由のタスクをポーリングできます。
+
Cloud Sync は、 AWS にデータブローカーを導入すると、必要なアウトバウンド通信を有効にするセキュリティグループを作成します。インストールプロセス中にプロキシサーバーを使用するようにデータブローカーを設定できます。

+
アウトバウンド接続を制限する必要がある場合は、を参照してください link:reference_sync_networking.html["データブローカーが連絡するエンドポイントのリスト"]。

* ネットワークタイムプロトコル（ NTP ）サービスを使用するように、ソース、ターゲット、およびデータブローカーを設定することを推奨します。3 つのコンポーネント間の時間差は 5 分を超えないようにしてください。




== AWS にデータブローカーを展開するために必要な権限

の導入に使用する AWS ユーザアカウント データブローカーの権限は、に含まれている必要があります https://s3.amazonaws.com/metadata.datafabric.io/docs/aws_iam_policy.json["ネットアップが提供するポリシーです"^]。



== AWS データブローカーで独自の IAM ロールを使用するための要件

Cloud Sync は、データブローカーを導入するときに、データブローカーインスタンスの IAM ロールを作成します。必要に応じて、独自の IAM ロールを使用してデータブローカーを展開できます。組織に厳密なセキュリティポリシーがある場合は、このオプションを使用できます。

IAM ロールは、次の要件を満たす必要があります。

* EC2 サービスは、 IAM の役割を信頼できるエンティティとして引き受けることを許可されている必要があります。
* link:media/aws_iam_policy_data_broker.json["この JSON ファイルで定義されている権限"^] データブローカーが正しく機能するように、 IAM ロールに関連付ける必要があります。


データブローカーを導入する際に IAM ロールを指定するには、次の手順に従います。



== データブローカーのインストール

同期関係を作成するときに、 AWS にデータブローカーをインストールできます。

.手順
. [ 新しい同期の作成 *] をクリックします。
. [ 同期関係の定義 *] ページで、ソースとターゲットを選択し、 [ 続行 *] をクリックします。
+
「 * データブローカー * 」ページが表示されるまで、手順を完了します。

. [ * データブローカー * ] ページで、 [ * データブローカーの作成 * ] をクリックし、 [ * Amazon Web Services * ] を選択します。
+
データブローカーがすでにある場合は、をクリックする必要があります image:screenshot_plus_icon.gif["プラスアイコンの場合のスクリーンショット"] 最初にアイコンをクリックします

+
image:screenshot_create_data_broker.gif["AWS 、 Azure 、 GCP 、オンプレミスのデータブローカーを選択できるデータブローカーページのスクリーンショット。"]

. データブローカーの名前を入力し、 [* 続行 ] をクリックします。
. AWS でデータブローカーを作成するために、 Cloud Sync アクセスキーを入力します。
+
キーは保存されず、他の目的に使用されることもありません。

+
アクセスキーを指定しない場合は、ページの下部にあるリンクをクリックして CloudFormation テンプレートを使用します。このオプションを使用する場合は、 AWS に直接ログインするため、クレデンシャルを指定する必要はありません。

+
[[cft]] CloudFormation テンプレートを使用してデータブローカーインスタンスを起動する方法を紹介したビデオを次に示します。

+
video::video_cloud_sync.mp4[width=848,height=480]
. AWS アクセスキーを入力した場合は、インスタンスの場所を選択し、キーペアを選択し、パブリック IP アドレスを有効にするかどうかを選択します。既存の IAM ロールを選択した場合は、 Cloud Sync によってロールが作成されるようにこのフィールドを空白のままにします。
+
独自の IAM ロールを選択した場合は、 <<iam,必要な権限を指定する必要があります>>。

+
image:screenshot_aws_data_broker.gif["AWS にデータブローカーを導入する際に提供する必要がある情報のスクリーンショット。"]

. データブローカーが利用可能になったら、 Cloud Sync で [* 続行 ] をクリックします。
+
次の図は、 AWS に正常に導入されたインスタンスを示しています。

+
image:screenshot_created_instance.gif["このスクリーンショットは、正常に導入されたインスタンスを示していますこのインターフェイスには、 AWS ネットワーキングを含むインスタンスの詳細が表示されます。"]

. ウィザードのページに入力して、新しい同期関係を作成します。


AWS にデータブローカーを導入し、新しい同期関係を作成しました。このデータブローカーは、追加の同期関係とともに使用できます。
