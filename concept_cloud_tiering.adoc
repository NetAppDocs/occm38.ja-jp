---
sidebar: sidebar 
permalink: concept_cloud_tiering.html 
keywords: cloud tiering, overview, conceptual, value, features, cost, charging, service connector 
summary: Cloud Tiering は、アクセス頻度の低いデータをクラウド内のオブジェクトストレージに自動的に階層化することで、オンプレミスのストレージコストを削減するネットアップマネージドサービスです。これにより、アプリケーションレイヤを変更することなく、データセンターをパブリッククラウドに拡張できます。 
---
= Cloud Tiering の詳細をご確認ください
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ネットアップの Cloud Tiering Service は、アクセス頻度の低いデータをオンプレミスの ONTAP クラスタからオブジェクトストレージに自動的に階層化することで、データセンターをクラウドへと拡張します。これにより、クラスタの貴重なスペースが解放され、アプリケーションレイヤに変更を加えることなく、より多くのワークロードに対応できるようになります。Cloud Tiering を使用すると、データセンターのコストを削減し、 CAPEX モデルから OPEX モデルへの切り替えが可能になります。

Cloud Tiering サービスには、 FabricPool の機能が活用されています。FabricPool はネットアップデータファブリックのテクノロジで、低コストのオブジェクトストレージへデータを自動で階層化することができます。アクティブなデータはハイパフォーマンスの SSD に保持されますが、非アクティブなデータは低コストのオブジェクトストレージに階層化され、 ONTAP のデータ効率は維持されます。



== の機能

Cloud Tiering は、自動化、監視、レポート、共通の管理インターフェイスを提供します。

* 自動化により、データのセットアップと管理が容易になります オンプレミスの ONTAP クラスタからクラウドへの階層化
* 単一のコンソールで、個別に行う必要がありません 複数のクラスタにわたって FabricPool を管理
* レポートには、アクティブなデータと非アクティブなデータの量が表示されます 各クラスタ
* 階層化の健常性ステータスを確認することで、問題を特定して修正できます そのような状況が発生したとき
* Cloud Volumes ONTAP システムを使用している場合は、クラスタダッシュボードにこれらのシステムが表示されるので、ハイブリッドクラウドインフラにおけるデータの階層化を完全に把握できます
+

TIP: Cloud Volumes ONTAP システムは、 Cloud Tiering から読み取り専用です。 link:task_tiering.html["Cloud Volumes ONTAP の階層化はで設定します Cloud Manager の作業環境"]。



Cloud Tiering が提供する価値の詳細については、 https://cloud.netapp.com/cloud-tiering["NetApp Cloud Central の Cloud Tiering ページを確認してください"^]。


NOTE: Cloud Tiering を使用すると、ストレージ容量を大幅に削減できますが、バックアップソリューションではありません。



== サポートされているオブジェクトストレージプロバイダ

ONTAP クラスタから Amazon S3 、 Microsoft Azure Blob ストレージ、 Google Cloud Storage 、 StorageGRID （プライベートクラウド）にアクセス頻度の低いデータを階層化することができます。



== 価格とライセンス

従量課金制のサブスクリプション、 FabricPool _ という ONTAP 階層化ライセンス、またはその両方を組み合わせて使用して、クラウド階層化の料金を支払うことができます。ライセンスがない場合は、最初のクラスタで 30 日間の無償トライアルを利用できます。

データを StorageGRID に階層化する場合、料金は発生しません。BYOL ライセンスでも PAYGO 登録も必要ありません。

https://cloud.netapp.com/cloud-tiering["価格設定の詳細を表示します"^]。



=== 30 日間の無償トライアルをご利用いただけます

FabricPool ライセンスがない場合は、最初のクラスタへの階層化を設定すると、 Cloud Tiering の 30 日間の無償トライアルが開始されます。30 日間の無償トライアルの終了後は、従量課金制サブスクリプション、 FabricPool ライセンス、またはその両方を組み合わせて Cloud Tiering を購入する必要があります。

無償トライアルが終了し、ライセンスの登録や追加を行っていない場合、 ONTAP はオブジェクトストレージにコールドデータを階層化しなくなりますが、既存のデータには引き続きアクセスできます。



=== 従量課金制のサブスクリプション

Cloud Tiering は、従量課金制モデルで使用量ベースのライセンスを提供します。クラウドプロバイダの市場に登録すると、階層化されたデータに対して GB 単位の料金が発生します。前払い料金は発生しません。クラウドプロバイダから月額料金で請求されます。

無償トライアルを利用されている場合や、お客様が独自のライセンスを使用（ BYOL ）されている場合も、サブスクリプションを設定する必要があります。

* 登録すると、無料トライアルの終了後にサービスが中断されることがなくなります。
+
試用期間が終了すると、階層化したデータの量に応じて 1 時間ごとに課金されます。

* FabricPool ライセンスで許可されている数を超えるデータを階層化した場合、従量課金制サブスクリプションでデータの階層化が続行されます。
+
たとえば、 10TB のライセンスがある場合、 10TB を超える容量はすべて従量課金制サブスクリプションで課金されます。



無料トライアル期間中、または FabricPool ライセンスを超過していない場合は、従量課金制のサブスクリプションから料金が請求されることはありません。

link:task_licensing_cloud_tiering.html["従量課金制サブスクリプションの設定方法について説明します"]。



=== お客様所有のライセンスを使用

ネットアップから ONTAP FabricPool ライセンスを購入して、お客様所有のライセンスを使用することができます。タームベースライセンスまたは永久ライセンスを購入できます。

FabricPool ライセンスを購入したら、そのライセンスをクラスタに追加する必要があります。 link:task_licensing_cloud_tiering.html#adding-a-tiering-license-to-ontap["Cloud Tiering から直接実行できます"]。

Cloud Tiering でライセンスをアクティブ化したあとに追加のアドオン容量を購入した場合、クラスタ上のライセンスは自動的に新しい容量で更新されます。新しいネットアップライセンスファイル（ NLF ）をクラスタに適用する必要はありません。

前述したように、クラスタに BYOL ライセンスがある場合でも、従量課金制のサブスクリプションを設定することを推奨します。

mailto ： ng-cloud-tiering@netapp.com ？ subject = ライセンス [ ライセンスの購入についてお問い合わせください ]



== Cloud Tiering の仕組み

クラウド階層化とは、 FabricPool テクノロジを使用して、オンプレミスの ONTAP クラスタからパブリッククラウドまたはプライベートクラウドのオブジェクトストレージに、アクセス頻度の低いコールドデータを自動的に階層化するネットアップマネージドサービスです。ONTAP への接続はコネクタから行われます。

次の図は、各コンポーネント間の関係を示しています。

image:diagram_cloud_tiering.png["「クラウドプロバイダのサービスコネクタへの接続、 ONTAP クラスタへの接続を備えたクラウド階層化サービス、クラウドプロバイダ内の ONTAP クラスタとオブジェクトストレージの接続を示すアーキテクチャイメージ。アクティブなデータは ONTAP クラスタに格納され、アクセス頻度の低いデータはオブジェクトストレージに格納されます。」"]

Cloud Tiering の仕組みは次のとおりです。

. オンプレミスクラスタは、 Cloud Manager から検出できます。
. 階層化を設定するには、バケット / コンテナ、ストレージクラスまたはアクセス階層など、オブジェクトストレージの詳細を指定します。
. Cloud Manager は、オブジェクトストレージプロバイダを使用するように ONTAP を設定し、クラスタ上のアクティブなデータと非アクティブデータの量を検出します。
. 階層化するボリュームとそれらのボリュームに適用する階層化ポリシーを選択します。
. ONTAP は、アクセス頻度の低いデータをオブジェクトストアに階層化します。アクセス頻度の低いデータとして扱われるしきい値に達するとすぐにアクセスを開始します（を参照） <<Volume tiering policies>>）。




=== オブジェクトストレージ

各 ONTAP クラスタは、アクセス頻度の低いデータを 1 つのオブジェクトストアに階層化します。データの階層化を設定するときに、新しいバケット / コンテナを追加するか、ストレージクラスまたはアクセス階層とともに既存のバケット / コンテナを選択するかを選択できます。

* link:reference_aws_support.html["サポートされる S3 ストレージクラスについて説明します"]
* link:reference_azure_support.html["サポートされる Azure Blob アクセス階層の詳細については、こちらを参照して"]
* link:reference_google_support.html["サポートされている Google Cloud ストレージクラスについて説明します"]




=== ボリューム階層化ポリシー

階層化するボリュームを選択する場合は、各ボリュームに適用するボリューム階層化ポリシーを選択します。階層化ポリシーは、ボリュームのユーザデータブロックをクラウドに移動するタイミングと、移動するかどうかを決定します。

階層化ポリシーがありません:: パフォーマンス階層内のボリュームのデータを保持し、クラウドに移動されないようにします。
コールドスナップショット（ Snapshot のみ）::
+
--
データが階層化されるのは、アグリゲートの容量が 50% に達し、データがクーリング期間に達した場合のみです。デフォルトのクーリング日数は 2 ですが、日数は調整できます。


NOTE: パフォーマンス階層の容量が 70% を超える場合、クラウド階層からパフォーマンス階層への書き込みは無効になります。この場合、ブロックはクラウド階層から直接アクセスされます。

--
コールドユーザデータ（自動）::
+
--
ランダムリードで読み取られた場合、クラウド階層のコールドデータブロックはホットになり、パフォーマンス階層に移動されます。インデックススキャンやウィルス対策スキャンに関連するようなシーケンシャルリードで読み取られた場合、クラウド階層のコールドデータブロックはコールドのままで、パフォーマンス階層には書き込まれません。

データが階層化されるのは、アグリゲートの容量が 50% に達し、データがクーリング期間に達した場合のみです。クーリング期間とは、ボリューム内のユーザデータがアクセス頻度の低い状態とみなされてオブジェクトストアに移動されるまでの期間です。デフォルトのクーリング日数は 31 日ですが、日数は調整できます。


NOTE: パフォーマンス階層の容量が 70% を超える場合、クラウド階層からパフォーマンス階層への書き込みは無効になります。この場合、ブロックはクラウド階層から直接アクセスされます。

--
すべてのユーザデータ（すべて）::
+
--
読み取られた場合、クラウド階層のコールドデータブロックはコールドのままで、パフォーマンス階層に書き戻されません。このポリシーは ONTAP 9.6 以降で使用できます。

この階層化ポリシーを選択する前に、次の点を考慮してください。

* データを階層化することで、ストレージ効率が即座に低下します（インラインのみ）。
* このポリシーは、ボリュームのコールドデータが変更されないことに確信がある場合にのみ使用してください。
* オブジェクトストレージがトランザクションではないため、変更されるとフラグメント化の効果が大きくなります。
* データ保護関係のソースボリュームに「すべて」の階層化ポリシーを割り当てる前に、 SnapMirror 転送の影響を考慮してください。
+
データはすぐに階層化されるため、 SnapMirror はパフォーマンス階層ではなくクラウド階層からデータを読み取ります。そのため、 SnapMirror 処理が遅くなります。別の階層化ポリシーを使用している場合でも、 SnapMirror 処理の速度が遅くなる可能性があります。



--
すべての DP ユーザデータ（バックアップ）::
+
--

NOTE: このポリシーは ONTAP 9.5 以前で使用できます。ONTAP 9.6 以降では、「すべて * 」の階層化ポリシーに置き換えられています。

--

