---
sidebar: sidebar 
permalink: task_sync_creating_relationships.html 
keywords: sync, relationship, create, tags, settings, create a relationship, creating relationships, bucket setup, tags 
summary: 同期関係を作成すると、 Cloud Sync サービスはソースからターゲットにファイルをコピーします。最初のコピーの後、変更されたデータは 24 時間ごとに同期されます。 
---
= 同期関係を作成する
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
同期関係を作成すると、 Cloud Sync サービスはソースからターゲットにファイルをコピーします。最初のコピーの後、変更されたデータは 24 時間ごとに同期されます。

以下の手順は、 NFS サーバから S3 バケットへの同期関係を設定する方法の例を示しています。

.手順
. Cloud Manager で、 * Sync * をクリックします。
. [ 同期関係の定義 *] ページで、ソースとターゲットを選択します。
+
次の手順では、 NFS サーバから S3 バケットへの同期関係を作成する方法の例を示します。

+
image:screenshot_nfs_to_s3.gif["新しい同期関係で、ソースとして NFS 、ターゲットとして S3 を表示するスクリーンショット。"]

. NFS Server * ページで、 AWS と同期する NFS サーバの IP アドレスまたは完全修飾ドメイン名を入力します。
. [* データブローカー * ] ページで、プロンプトに従って AWS 、 Azure 、または Google Cloud Platform にデータブローカー仮想マシンを作成するか、データブローカーソフトウェアを既存の Linux ホストにインストールします。
+
詳細については、次のページを参照してください。

+
** link:task_sync_installing_aws.html["AWS にデータブローカーをインストールする"]
** link:task_sync_installing_azure.html["Azure へのデータブローカーのインストール"]
** link:task_sync_installing_gcp.html["GCP へのデータブローカーのインストール"]
** link:task_sync_installing_linux.html["Linux ホストへのデータブローカーのインストール"]


. データブローカーをインストールしたら、 [* 続行 ] をクリックします。
+
次の図は、 AWS に正常に展開されたデータブローカーを示しています。

+
image:screenshot_created_instance.gif["このスクリーンショットは、正常に導入されたインスタンスを示していますこのインターフェイスには、 AWS ネットワーキングを含むインスタンスの詳細が表示されます。"]

. [[filter]] [*Directories* ] ページで、最上位のディレクトリまたはサブディレクトリを選択します。
+
Cloud Sync がエクスポートを取得できない場合は、 * エクスポートを手動で追加 * をクリックし、 NFS エクスポートの名前を入力します。

+

NOTE: NFS サーバ上の複数のディレクトリを同期する場合は、同期関係を作成してから同期関係を作成する必要があります。

. 「 * AWS S3 Bucket * 」ページで、バケットを選択します。
+
** ドリルダウンして、バケット内の既存のフォルダを選択するか、バケット内に作成した新しいフォルダを選択します。
** リストに追加 * をクリックして、 AWS アカウントに関連付けられていない S3 バケットを選択します。 link:reference_sync_requirements.html#s3["S3 バケットには特定の権限を適用する必要があります。"]。


. [* Bucket Setup* ] ページで、バケットを設定します。
+
** S3 バケットの暗号化を有効にするかどうかを選択し、 AWS KMS キーの ARN を入力するか、 AES-256 暗号化を選択します。
** S3 ストレージクラスを選択します。 link:reference_sync_requirements.html#storage-classes["サポートされているストレージクラスを表示します。"]。
+
image:screenshot_bucket_setup.gif["このスクリーンショットは、バケットのセットアップページを示しています。このページでは、暗号化についてははいまたはいいえを選択し、同期されたデータ用の特定の S3 ストレージクラスを選択できます。"]



. [ * 設定 * ] ページで、ソースファイルとフォルダーをターゲットの場所で同期および維持する方法を定義します。
+
スケジュール:: 以降の同期に対して繰り返し実行するスケジュールを選択するか、同期スケジュールをオフにします。データを 1 分ごとに同期するように関係をスケジュールできます。
再試行:: ファイルをスキップする前に Cloud Sync がファイルの同期を再試行する回数を定義します。
最近変更されたファイル:: スケジュールされた同期よりも前に最近変更されたファイルを除外するように選択します。
ソース上のファイルを削除します::
+
--
このオプションを有効にする場合は、データブローカーで local.json ファイルのパラメータも変更する必要があります。ファイルを開き、 _workers.transferrer.delete-on-source_ という名前のパラメータを * true * に変更します。

--
ターゲット上のファイルを削除します:: ソースからファイルが削除された場合は、ターゲットの場所からファイルを削除することを選択します。デフォルトでは、ターゲットの場所からファイルが削除されることはありません。
オブジェクトのタグ付け:: AWS S3 が同期関係のターゲットである場合、 Cloud Sync は、同期操作に関連するメタデータを使用して S3 オブジェクトにタグ付けします。環境で S3 オブジェクトのタグ付けが不要な場合は、タグを無効にできます。タグ付けを無効にしても、 Cloud Sync には影響はありません。 Cloud Sync は同期メタデータを別の方法で保存します。
ファイルの種類:: 各同期に含めるファイルタイプ（ファイル、ディレクトリ、シンボリックリンク）を定義します。
ファイル拡張子を除外します::
+
--
video::video_file_extensions.mp4[width=840,height=240]
--
ファイルサイズ:: サイズに関係なくすべてのファイルを同期するか、特定のサイズ範囲のファイルのみを同期するかを選択します。
変更日:: 最後に変更した日付、特定の日付以降に変更されたファイル、特定の日付より前、または期間に関係なく、すべてのファイルを選択します。


. [* 関係タグ * （ Relationship Tags * ） ] ページで、最大 9 つの関係タグを入力し、 [ * 続行 * （ Continue * ） ] をクリックします。
+
Cloud Sync サービスは、 S3 バケットに同期する各オブジェクトにタグを割り当てます。

. 同期関係の詳細を確認し、 * 関係の作成 * をクリックします。


* 結果 *

クラウドの同期は、ソースとターゲットの間でデータの同期を開始します。
